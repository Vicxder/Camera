<!DOCTYPE html>
<html>
<head>
    <title>WebRTC Viewer</title>
</head>
<body>
    <h1>WebRTC Transmisi√≥n en Vivo</h1>
    <video id="remoteVideo" autoplay playsinline></video>
    <script>
        const pc = new RTCPeerConnection();
        const signalingSocket = new WebSocket("https://9de09f1e-f11f-4e7a-b7ae-e191a3b1b3c3-00-12v3aekwwj95m.janeway.replit.dev/");

        signalingSocket.onmessage = async (event) => {
            const message = JSON.parse(event.data);
            if (message.type === "offer") {
                await pc.setRemoteDescription(new RTCSessionDescription(message));
                const answer = await pc.createAnswer();
                await pc.setLocalDescription(answer);

                signalingSocket.send(JSON.stringify(pc.localDescription));
            }
        };

        pc.ontrack = (event) => {
            const video = document.getElementById("remoteVideo");
            video.srcObject = event.streams[0];
        };
    </script>
</body>
</html>
