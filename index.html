<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebRTC Video Viewer</title>
</head>
<body>
    <h1>Visualizaci√≥n de Video en Tiempo Real</h1>
    <video id="remoteVideo" autoplay playsinline></video>

    <script src="https://cdn.socket.io/4.0.1/socket.io.min.js"></script>
    <script>
        const socket = io("https://ba7ca419-8082-4bf6-892a-ca47d663801b-00-c4doxyx8alwp.riker.replit.dev/"); // Cambia la URL

        const remoteVideo = document.getElementById("remoteVideo");

        // Recibir frames desde el servidor
        socket.on("video_frame", (data) => {
            const frameBlob = atob(data.frame);
            const arrayBuffer = new Uint8Array(frameBlob.length);
            for (let i = 0; i < frameBlob.length; i++) {
                arrayBuffer[i] = frameBlob.charCodeAt(i);
            }

            const blob = new Blob([arrayBuffer], { type: "image/jpeg" });
            const url = URL.createObjectURL(blob);

            remoteVideo.src = url;
        });
    </script>
</body>
</html>
